<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>熱銷商品</title>

    <link rel="stylesheet" href="product_top.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather|Open+Sans">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../_css/bootstrap.css">
    <script src="../_js/bootstrap.bundle.js"></script>

    <style>
        body {
            font-family: "Open Sans", sans-serif;
        }
    </style>
</head>

<body>
    <div class="inner">

        <!-- 頁首 -->
        <div class="header_inner">
            <div class="head" id="top">
                <div class="logo ">
                    <a href="campig.html"><img src="./image/header/logo_block_1.jpg" alt="logo"
                            style="width:150px; height:50px;"></a>
                </div>

                <div class="header_right">
                    <a href="login.php"><img src="./image/header/user-solid.svg" alt="person"
                            style="width: 35px; height:35px;"></a>
                    <a href="#shopCar" data-bs-toggle="collapse"><img src="./image/header/cart-shopping-solid.svg"
                            alt="shoppingcar" style="width: 35px; height:35px; margin: 0 20px;"></a>
                    <!-- <input type="text" name="search" placeholder="Search"> -->
                </div>
            </div>
        </div>

        <!--導覽列  -->
        <nav class="navbar navbar-dark navbar-expand-lg position-fixed w-100">
            <div class="container-fluid">
                <a href="#" class="navbar-brand"></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar_content">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbar_content">
                    <div class="navbar-nav me-auto mb-2 mb-lg-0">
                        <a href="campig.html" class="nav-link actvie">首頁</a>
                        <a href="product.html" class="nav-link actvie">商品</a>
                        <a href="news.html" class="nav-link actvie">最新消息</a>
                        <a href="recmommed.html" class="nav-link actvie">營區推薦</a>

                    </div>
                    <form class="d-flex" role="search">
                        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn btn-outline-secondary" type="submit">Search</button>
                    </form>
                </div>
            </div>
        </nav>


        <!-- shoppingCar -->
        <div class="container">
            <div class="collapse" id="shopCar">
                <div id="car" class="car">
                    <div class="card card-body">
                        <div class="head_row hid">
                            <div class="check left"><input type="checkbox" onclick="checkAll()" class="i_check"
                                    id="i_check">
                            </div>
                            <div class="img left"> 全選</div>
                            <div class="name left">商品名稱</div>
                            <div class="price left">售價</div>
                            <div class="number left">數量</div>
                            <div class="subtotal left">小計</div>
                            <div class="ctrl left">操作</div>
                        </div>
                    </div>
                </div>


                <div id="sum_area">
                    <div id="pay"><a href="login.php">结帳</a></div>
                    <div id="pay_amout">合計：<span id="price_num">0</span>元</div>
                </div>
            </div>

            <div class="main">
                <!-- 左邊下拉式產品列 -->
                <div class="sidenav justify-content-center">
                    <a href="product.html">所有商品</a>
                    <hr>
                    <a href="product_top.html">熱銷商品</a>
                    <a href="#">本月新品</a>
                    <hr>
                    <button class="dropdown_btn">帳篷
                        <i class="fa fa-caret-down"></i>
                    </button>
                    <div class="dropdown-container">
                        <a href="product_tent.html">帳篷</a>
                        <a href="product_canopy.html">天幕</a>
                    </div>
                    <a href="#">寢具</a>
                    <a href="#">桌椅</a>
                    <a href="#">收納</a>
                    <a href="#">炊具</a>
                    <a href="#">燈具</a>
                    <a href="#">工具</a>
                    <a href="#">保冷</a>
                </div>

                <div class="prod_inner">
                    <div class="prod_head">
                        <nav>
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="#" class="allLink text-dark">所有商品</a></li>
                                <li class="breadcrumb-item active">熱銷商品</li>
                                <!-- <li class="breadcrumb-item active" >Data</li> -->
                            </ol>
                        </nav>
                    </div>

                    <!-- 商品 -->
                    <div id="box">
                        <h2 id="h5" class="box_head"></h2>
                        <ul>
                        </ul>
                    </div>
                </div>
            </div>
        </div>





        <!-- 頁尾 -->
        <div class="footer_inner">
            <div class="footer_middel">
                <div class="aboutme">
                    <p style="font-size: 18px; text-shadow: 2px 6px grey;">關於我們</p>
                    <div class="icons">
                        <a href="https://www.Facebook.com" target="_blank"><img src="./image/首頁/icons8-facebook.svg"
                                alt="" width="40px"></a>
                        <a href="https://www.instagram.com" target="_blank"><img src="./image/首頁/icons8-instagram.svg"
                                alt="" width="40px"></a>
                        <a href="https://www.line.com" target="_blank"><img src="./image/首頁/icons8-line.svg" alt=""
                                width="40px"></a>
                        <a href="https://www.twitter.com" target="_blank"><img src="./image/首頁/icons8-twitter.svg"
                                alt="" width="40px"></a>
                    </div>
                </div>

                <div class="store">
                    <img src="./image/首頁/map.jpg" alt="logo" style="width:200px; height:100px; margin: 0 30px 10px 0;">
                    <div>
                        電話：
                        <a href="telto:042345678" style="color: white;">042-345678</a><br><br>
                        地址：
                        <a href="https://goo.gl/maps/TFn6TpqWjRa9WG2L6" style="color: white;">台中市西屯區台灣大道三段301號5樓</a>
                    </div>
                </div>
                <div class="open">
                    <p>
                        營業時間：
                        週一～週五 10:00~19:00<br><br>
                        聯絡我們：
                        <a href="mailto:service@campig.com" style="color: white;">service@campig.com</a>
                    </p>
                </div>
            </div>
            <div class="footer_bottom">
                <!-- <hr> -->
                <div>
                    <p>C@MP!G&#169有限公司 隱私條款｜條款及細則｜退換貨政策</p>
                    <p></p>
                </div>

            </div>
        </div>
    </div>





    <script>
        //商品 
        window.onload = function () {
            var aData = [{
                "imgUrl": "./image/首頁/top1.jpeg",
                "proName": " Forest Outdoor 鐵網架含桌板",
                "proPrice": "1240",
                "proComm": "1"
            },
            {
                "imgUrl": "./image/首頁/top2.webp",
                "proName": "ADAM 戶外式充電油箱LED風扇",
                "proPrice": "1790",
                "proComm": "2.7"
            },
            {
                "imgUrl": "./image/首頁/top3.webp",
                "proName": " G40 LED復古串燈 塑膠燈串",
                "proPrice": "950",
                "proComm": "1.3"
            },
            {
                "imgUrl": "./image/首頁/top4.webp",
                "proName": " KZM 圖騰不沾煎烤盤附木手把 烤盤 ",
                "proPrice": "2580",
                "proComm": "1.1"
            },
            {
                "imgUrl": "./image/首頁/top5.webp",
                "proName": "Coleman 橄欖山印地安帳CM-38140",
                "proPrice": "7600",
                "proComm": "1.3"
            },
            {
                "imgUrl": "./image/商品/寢具/床墊4.jpeg",
                "proName": " SAL 自開蚊帳 輕量化吊床  ",
                "proPrice": "980",
                "proComm": "3.3"
            },
            {
                "imgUrl": "./image/首頁/top6.jpg",
                "proName": " 北緯23度 TPU 3D雙人充氣床墊",
                "proPrice": "3850",
                "proComm": "1.2"
            },
            {
                "imgUrl": "./image/商品/桌椅/椅1.jpeg",
                "proName": "  LOGOS 組立式輕量椅 導演椅 ",
                "proPrice": "3150",
                "proComm": "1"
            },
            {
                "imgUrl": "./image/商品/桌椅/桌5.jpeg",
                "proName": "  KZM IMS鋼網折疊桌 含收納袋 摺疊桌  ",
                "proPrice": "3680",
                "proComm": "1.9"
            },
            {
                "imgUrl": "./image/商品/收納/收納包.webp",
                "proName": " 【ADAM】 迷你輪座包 / 收納包/ 圓形收納袋 / 延長線收納  ",
                "proPrice": "250",
                "proComm": "1"
            },
            {
                "imgUrl": "./image/商品/工具/營繩.jpeg",
                "proName": "  CAMPERSON 反光營繩旗艦組  ",
                "proPrice": "390",
                "proComm": "2.5"
            },
            {
                "imgUrl": "./image/商品/保冰/冰桶.jpeg",
                "proName": "  RD-270 樂活不露冰桶 保溫桶  ",
                "proPrice": "1350",
                "proComm": "3.1"
            },
            ];
            var oBox = document.getElementById("box");
            var oCar = document.getElementById("car");
            var oUl = document.getElementsByTagName("ul")[0];

            for (var i = 0; i < aData.length; i++) {
                var oLi = document.createElement("li");
                var data = aData[i];

                oLi.innerHTML += '<div class="pro_img"><img src="' + data["imgUrl"] + '" width="200" height="150"></div>';
                oLi.innerHTML += '<p id="h3" class="pro_name">' + data["proName"] + '</p>';
                oLi.innerHTML += '<p class="pro_price">' + 'NT' + data["proPrice"] + '元</p>';
                oLi.innerHTML += '<p class="pro_rank">' + data["proComm"] + '萬人好評</p>';
                oLi.innerHTML += '<div class="add_btn">加入購物車</div>';
                oUl.appendChild(oLi);

            }
            var aBtn = getClass(oBox, "add_btn");//box所有添加購物車按钮
            var number = 0;//初始化商品数量
            for (var i = 0; i < aBtn.length; i++) {
                number++;
                aBtn[i].index = i;
                aBtn[i].onclick = function () {
                    var oDiv = document.createElement("div");
                    var data = aData[this.index];
                    oDiv.className = "rowCar hid";
                    oDiv.innerHTML += '<div class="check left"> <input type="checkbox" onclick="checkAll()" class="i_check" id="i_check"></div>';
                    oDiv.innerHTML += '<div class="img left"><img src="' + data["imgUrl"] + '" width="80" height="80"></div>';
                    oDiv.innerHTML += '<div class="name left"><span>' + data["proName"] + '</span></div>';
                    oDiv.innerHTML += '<div class="price left"><span>' + data["proPrice"] + '元</span></div>';
                    oDiv.innerHTML += ' <div class="item_count_i"><div class="num_count"><div class="count_d">-</div><div class="c_num">1</div><div class="count_i">+</div></div> </div>'
                    oDiv.innerHTML += '<div class="subtotal left"><span>' + data["proPrice"] + '元</span></div>'
                    oDiv.innerHTML += '<div class="ctrl left"><a rel="nofollow" href="javascript:;">X</a></div>';
                    oCar.appendChild(oDiv);
                    var flag = true;
                    var check = oDiv.firstChild.getElementsByTagName("input")[0];
                    check.onclick = function () {
                        // console.log(check.className);
                        if (check.className == "i_check i_acity") {
                            check.classList.remove("i_acity");

                        } else {
                            check.classList.add("i_acity");
                        }
                        getAmount();
                    }
                    var delBtn = oDiv.lastChild.getElementsByTagName("a")[0];
                    delBtn.onclick = function () {
                        var result = confirm("確定刪除嗎?");
                        if (result) {
                            oCar.removeChild(oDiv);
                            number--;
                            getAmount();
                        }
                    }
                    var i_btn = document.getElementsByClassName("count_i");
                    for (var k = 0; k < i_btn.length; k++) {
                        i_btn[k].onclick = function () {
                            bt = this;
                            //小計
                            at = this.parentElement.parentElement.nextElementSibling;
                            //單位
                            pt = this.parentElement.parentElement.previousElementSibling;
                            //数量
                            node = bt.parentNode.childNodes[1];
                            console.log(node);
                            num = node.innerText;
                            num = parseInt(num);
                            num++;
                            node.innerText = num;
                            //售價
                            price = pt.innerText;
                            price = price.substring(0, price.length - 1);
                            //計算小計值
                            at.innerText = price * num + "元";
                            //總額
                            getAmount();
                        }
                    }
                    //所有的数量加減按钮
                    var d_btn = document.getElementsByClassName("count_d");
                    for (k = 0; k < i_btn.length; k++) {
                        d_btn[k].onclick = function () {
                            bt = this;
                            //小計
                            at = this.parentElement.parentElement.nextElementSibling;
                            //售價
                            pt = this.parentElement.parentElement.previousElementSibling;
                            //c_num
                            node = bt.parentNode.childNodes[1];
                            num = node.innerText;
                            num = parseInt(num);
                            if (num > 1) {
                                num--;
                            }
                            node.innerText = num;
                            //售價
                            price = pt.innerText;
                            price = price.substring(0, price.length - 1);
                            //計算小計	
                            at.innerText = price * num + "元";
                            //總額
                            getAmount();
                        }
                    }

                    delBtn.onclick = function () {
                        var result = confirm("確定刪除嗎?");
                        if (result) {
                            oCar.removeChild(oDiv);
                            number--;
                            getAmount();
                        }
                    }

                }
            }

        }

        function getClass(oBox, tagname) {
            var aTag = oBox.getElementsByTagName("*");
            var aBox = [];
            for (var i = 0; i < aTag.length; i++) {
                if (aTag[i].className == tagname) {
                    aBox.push(aTag[i]);
                }
            }
            return aBox;
        }


        var index = false;
        function checkAll() {
            var choose = document.getElementById("car").getElementsByTagName("input");
            // console.log(choose);
            if (choose.length != 1) {
                for (i = 0; i < choose.length; i++) {
                    if (!index) {
                        choose[0].classList.add("i_acity2")
                        choose[i].classList.add("i_acity");
                        console.log(classList);
                    }
                    // } else {
                    //     choose[i].classList.remove("i_acity");
                    //     choose[0].classList.remove("i_acity2")
                    // }
                }
                index = !index;
            }
            getAmount();
        }



        //售價合計
        function getAmount() {
            // console.log(ys);
            ns = document.getElementsByClassName("i_acity");
            console.log(ns);
            sum = 0;
            //勾選的計算
            document.getElementById("price_num").innerText = sum;
            for (y = 0; y < ns.length; y++) {
                //總計
                amount_info = ns[y].parentElement.parentElement.lastElementChild.previousElementSibling;
                num = parseInt(amount_info.innerText);
                sum += num;
                document.getElementById("price_num").innerText = sum;
            }
        }

        //下拉式選單

        var dropdown = document.getElementsByClassName("dropdown_btn");
        var i;

        for (i = 0; i < dropdown.length; i++) {
            dropdown[i].addEventListener("click", function () {
                this.classList.toggle("active");
                var dropdownContent = this.nextElementSibling;
                if (dropdownContent.style.display === "block") {
                    dropdownContent.style.display = "none";
                } else {
                    dropdownContent.style.display = "block";
                }
            });
        }

    </script>

</body>

</html>